(this["webpackJsonplocal-air"]=this["webpackJsonplocal-air"]||[]).push([[0],{119:function(e,t,a){e.exports=a.p+"static/media/logo.6cd4726c.jpg"},143:function(e,t,a){e.exports=a(157)},148:function(e,t,a){},149:function(e,t,a){},157:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(9),l=a.n(o),i=(a(148),a(149),a(18)),c=a(19),s=a(20),u=a(22),m=a(12),p=a(4),d=a(202),h=a(205),f=a(49),E=Object(d.a)({img:{maxWidth:"300px",width:"100%"},errorText:{textAlign:"left",padding:"8px"},freepik:{color:"grey",textDecoration:"none","&&:hover":{textDecoration:"underline"}}});var g=function(e){var t=E(),a="connection"===e.error.type?"Can't reach server...":"Something went wrong...",n="connection"===e.error.type?"/server-error.png":"/error.png";return r.a.createElement("div",null,r.a.createElement(f.a,{variant:"subtitle1",className:t.typographyTitle},a),r.a.createElement("br",null),r.a.createElement("img",{src:n,alt:"Error",className:t.img}),r.a.createElement("br",null),r.a.createElement(h.a,{href:"http://www.freepik.com",variant:"caption"},"Designed by Freepik"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(f.a,null,e.error.message.split("\n").map((function(e,t){return r.a.createElement("p",{key:t},e)}))))},y=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={hasError:!1,error:"",errorStack:""},n}return Object(c.a)(a,[{key:"componentDidCatch",value:function(e,t){this.setState({error:e,errorStack:t.componentStack})}},{key:"render",value:function(){return this.state.hasError?r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(g,{error:this.state.error})):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0,error:e}}}]),a}(r.a.Component),b=a(206),v=a(207),D=a(74),w=a.n(D),O=a(76),T=a.n(O),C=a(77),N=a.n(C),S=a(16),k=a(37),j=a(239),L={"/":0,"/Home":0,"/notes":1,"/files":2},x=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={pathIndex:0},n}return Object(c.a)(a,[{key:"render",value:function(){var e=this,t=this.props.classes;return r.a.createElement(j.a,{boxShadow:2,className:t.stickToBottom},r.a.createElement(b.a,{showLabels:!0,value:this.state.pathIndex,onChange:function(t,a){e.setState({pathIndex:a})}},r.a.createElement(v.a,{label:"Home",icon:r.a.createElement(w.a,null),component:S.b,to:"/"}),r.a.createElement(v.a,{label:"Notes",icon:r.a.createElement(T.a,null),component:S.b,to:"/notes"}),r.a.createElement(v.a,{label:"Files",icon:r.a.createElement(N.a,null),component:S.b,to:"/files"})))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=e.location.pathname;return{pathIndex:L[a]}}}]),a}(n.Component),F=Object(k.f)(Object(p.a)({stickToBottom:{width:"100%",position:"fixed",bottom:0}})(x)),P=a(218),I=a(217),M=a(208),B=a(216),_=a(209),A=a(244),V=a(219),W=a(112),H=a.n(W),G=a(220),R=a(159),X=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).onClickSave=function(){var e=n.props.notes.items.filter((function(e){return e.isMainNote}))[0];n.props.postNote(Object(m.a)({},e,{content:n.state.content,selfDestruct:n.state.selfDestruct,isMainNote:!0}))},n.onClickClear=function(){n.setState({content:""})},n.onChangeContent=function(e){n.setState({content:e.target.value})},n.HomeNote=function(e){return r.a.createElement(M.a,{className:e.classes.card,variant:"outlined"},r.a.createElement(_.a,null,r.a.createElement(A.a,{fullWidth:!0,id:"content",placeholder:"Type something...",multiline:!0,rows:"16",InputProps:{className:e.classes.underline},onChange:n.onChangeContent,value:n.state.content})),r.a.createElement(B.a,{className:e.classes.cardActions},r.a.createElement(I.a,{variant:"contained",color:"primary",onClick:n.onClickSave},"Save"),r.a.createElement(I.a,{color:"primary",onClick:n.onClickClear},"Clear")))},n.state={content:null,selfDestruct:""},n}return Object(c.a)(a,[{key:"isLoading",value:function(){return void 0===this.props.notes.isLoading||this.props.notes.isLoading}},{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(P.a,{maxWidth:"sm"},r.a.createElement(R.a,{className:e.backdrop,open:this.props.notes.isLoading},r.a.createElement(V.a,{color:"inherit"})),r.a.createElement(G.a,{onClick:this.props.handleThemeToggle,className:e.themeButton},r.a.createElement(H.a,null)),r.a.createElement(f.a,{variant:"h2",gutterBottom:!0,className:e.typographyTitle},"Local Box"),this.props.notes.error?r.a.createElement(g,{error:this.props.notes.error}):r.a.createElement(this.HomeNote,{classes:e}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=e.notes.items.filter((function(e){return e.isMainNote}))[0];return null==t.content&&a?{content:a.content}:null}}]),a}(n.Component),U=Object(p.a)((function(e){return{textarea:{border:"none",overflow:"hidden",overflowWrap:"break-word",resize:"none",height:"400px",width:"100%"},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"},typographyTitle:{marginTop:"16px"},underline:{"&&&:before":{borderBottom:"none"},"&&:after":{borderBottom:"none"}},themeButton:{position:"absolute",top:"8px",right:"8px"}}}))(X),z=a(215),J=a(160),K=a(222),Y=a(221),Z=a(223),Q=a(224),$=a(67),q=a.n($),ee=Object(d.a)((function(e){return{root:{backgroundColor:e.palette.background.paper,paddingBottom:2*(56+e.spacing(2)),height:"100vh"},typographyTitle:{textAlign:"left",padding:e.spacing(2,2,0)},fab:{position:"fixed",bottom:56+e.spacing(2),right:e.spacing(2)},destructText:{color:e.palette.error.light},img:{maxWidth:"300px",width:"100%"},errorText:{textAlign:"left",padding:"8px"}}})),te=function(e){var t=e.notes,a=ee(),n=new Intl.DateTimeFormat("default",{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",hour12:!1}),o=t.items.filter((function(e){return!e.isMainNote}));return r.a.createElement(z.a,null,o.map((function(e){return r.a.createElement(J.a,{button:!0,divider:!0,key:e._id,component:S.b,to:"/notes/".concat(e._id)},r.a.createElement(Y.a,{primary:e.title,secondary:n.format(new Date(Date.parse(e.updatedAt)))}),r.a.createElement(K.a,null,r.a.createElement(f.a,{variant:"caption",className:a.destructText},"Delete in",r.a.createElement("br",null),function(e,t){var a=(new Date(Date.parse(e)+60*t*60*1e3)-Date.now())/6e4,n=a/60,r=Math.round(a%60);return n<=1?r+"min":n>=11.5||0===r?Math.round(n)+" hours":Math.floor(n)+"h "+r+"min"}(e.updatedAt,e.selfDestruct))))})))};function ae(e){var t=e.notes,a=ee();return null!==t.error?r.a.createElement("div",{className:a.root},r.a.createElement(f.a,{variant:"h4",gutterBottom:!0,className:a.typographyTitle},"Notes"),r.a.createElement(g,{error:t.error})):r.a.createElement("div",{className:a.root},r.a.createElement(f.a,{variant:"h4",gutterBottom:!0,className:a.typographyTitle},"Notes"),t.isLoading?r.a.createElement(Z.a,null):r.a.createElement(te,{notes:t}),r.a.createElement(Q.a,{color:"primary","aria-label":"add",className:a.fab,component:S.b,to:"/newNote"},r.a.createElement(q.a,null)))}var ne=a(46),re="http://192.168.1.12:3000/",oe=function(e){return{type:"LOADING_STATE_NOTES",payload:e}},le=function(e){return{type:"ERROR_NOTES",payload:e}},ie=function(e){return{type:"LOAD_NOTES",payload:e}},ce=function(e){return function(t){t(oe(!0));var a=e._id?"api/notes/"+e._id:"api/notes";return fetch(re+a,{method:e._id?"PUT":"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"},credentials:"same-origin"}).then((function(e){if(e.ok)return e;var t=new Error("Error "+e.status+": "+e.statusText);throw t.response=e,t}),(function(e){throw e})).then((function(e){return e.json()})).then((function(a){return e._id?t(function(e){return{type:"EDIT_NOTE",payload:e}}(a)):t(function(e){return{type:"ADD_NOTE",payload:e}}(a))})).catch((function(e){e.type="connection",e.message="Your note could not be posted.\nError: "+e.message,t(le(e))}))}},se=a(212),ue=a(240),me=a(245),pe=a(228),de=a(79),he=a.n(de),fe=a(225),Ee=a(227),ge=a(226);function ye(e){return r.a.createElement(fe.a,{open:e.open,onClose:e.handleClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(ge.a,{id:"alert-dialog-title"},"Delete this Note?"),r.a.createElement(Ee.a,null,r.a.createElement(I.a,{onClick:e.handleClose,color:"primary"},"Cancel"),r.a.createElement(I.a,{onClick:e.handleDelete,color:"primary",autoFocus:!0},"Delete")))}var be=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).onChangeSelfDestruct=function(e){n.setState({selfDestruct:e.target.value,touched:!0})},n.onChangeTitle=function(e){n.setState({title:e.target.value,touched:!0})},n.onChangeContent=function(e){n.setState({content:e.target.value,touched:!0})},n.onClickSave=function(e){var t={_id:n.state.id,title:n.state.title,content:n.state.content,selfDestruct:n.state.selfDestruct};n.props.postNote(t)},n.onClickTrash=function(e){n.setState({deleteDialogOpen:!0})},n.handleCloseDeleteDialog=function(){n.setState({deleteDialogOpen:!1})},n.handleDelete=function(){n.props.match.params.noteId&&n.props.deleteNote(n.props.match.params.noteId),n.props.history.goBack(),n.setState({deleteDialogOpen:!1})},n.state={id:null,deleteDialogOpen:!1,selfDestruct:"8",title:"",content:"",touched:!1},n}return Object(c.a)(a,[{key:"render",value:function(){if(this.state.noteNotFound){var e=this.props.match.params.noteId,t=new Error("Could not find note with id "+e);return r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(g,{error:t}))}var a=this.props.classes;return r.a.createElement(P.a,{maxWidth:"sm"},r.a.createElement(f.a,{variant:"h4",gutterBottom:!0,className:a.typographyTitle},"/newNote"===this.props.match.path?"New Note":"Edit"),r.a.createElement(M.a,{variant:"outlined"},r.a.createElement(_.a,null,r.a.createElement(A.a,{fullWidth:!0,id:"title",label:"Title",className:a.title,onChange:this.onChangeTitle,value:this.state.title}),r.a.createElement(A.a,{fullWidth:!0,id:"content",label:"Note",placeholder:"Type something...",multiline:!0,rows:"15",InputProps:{className:a.underline},onChange:this.onChangeContent,value:this.state.content})),r.a.createElement(B.a,null,r.a.createElement(I.a,{variant:"contained",color:"primary",className:a.saveBottom,onClick:this.onClickSave},"Save"),r.a.createElement("div",{className:a.space}),r.a.createElement(se.a,{margin:"dense",variant:"outlined",className:a.formControl},r.a.createElement(me.a,{id:"destruct-label"},"Self Destruct"),r.a.createElement(ue.a,{labelId:"destruct-label",id:"destructt",value:this.state.selfDestruct,onChange:this.onChangeSelfDestruct,label:"Self Destruct"},r.a.createElement(pe.a,{value:"-1"},"Never"),r.a.createElement(pe.a,{value:"1"},"1 Hour"),r.a.createElement(pe.a,{value:"8"},"8 Hours"),r.a.createElement(pe.a,{value:"24"},"24 Hours"),r.a.createElement(pe.a,{value:"72"},"3 Days"))),r.a.createElement(G.a,{"aria-label":"Delete",className:a.iconToRight,onClick:this.onClickTrash},r.a.createElement(he.a,null)))),r.a.createElement(ye,{open:this.state.deleteDialogOpen,handleClose:this.handleCloseDeleteDialog,handleDelete:this.handleDelete}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){if(e.notes.isLoading)return null;var a=e.match.params.noteId;if(a===t.id)return null;if(!a)return t.touched?null:{id:null,selfDestruct:"8",title:"",content:"",touched:!1};var n=e.notes.items.filter((function(e){return e._id===a}))[0];return n?{id:n._id,selfDestruct:n.selfDestruct,title:n.title,content:n.content,touched:!1}:{noteNotFound:!0}}}]),a}(n.Component),ve=Object(ne.b)((function(e){return{notes:e.notes}}),(function(e){return{postNote:function(t){return e(ce(t))},deleteNote:function(t){return e(function(e){return function(t){return t(oe(!0)),fetch(re+"api/notes/"+e,{method:"DELETE",credentials:"same-origin"}).then((function(e){if(e.ok)return e;var t=new Error("Error "+e.status+": "+e.statusText);throw t.response=e,t}),(function(e){throw e})).then((function(e){return e.json()})).then((function(a){return t(function(e){return{type:"DELETE_NOTE",payload:e}}(e))})).catch((function(e){e.type="connection",e.message="Unable to delete note.\nError: "+e.message,t(le(e))}))}}(t))}}}))(Object(p.a)((function(e){return{typographyTitle:{marginTop:"16px"},title:{marginBottom:"8px",marginTop:"-8px"},underline:{"&&&:before":{borderBottom:"none"},"&&:after":{borderBottom:"none"}},formControl:{minWidth:140},selectEmpty:{marginTop:e.spacing(2)},saveBottom:{marginLeft:e.spacing(1)},space:{width:"100%"}}}))(Object(k.f)(be))),De=a(40),we=a(231),Oe=a(230),Te=a(116),Ce=a.n(Te),Ne=a(115),Se=a.n(Ne),ke=a(229),je=a(232),Le=a(242),xe=Object(d.a)((function(e){return{deleteIcon:{marginLeft:"auto"},lockIcon:{color:e.palette.success.main},cardContent:{paddingBottom:0},cardMedia:{marginBottom:e.spacing(1),objectFit:"contain"},typography:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},destructText:{color:e.palette.error.light}}})),Fe=["ACC","AE","AI","AN","AVI","BMP","CSV","DAT","DGN","DOC","DOCH","DOCM","DOCX","DOTH","DW","DWFX","DWG","DXF","DXL","EML","EPS","F4A","F4V","FILE","FLV","FS","GIF","HTML","IND","JPEG","JPG","JPP","Log","LR","M4V","MBOX","MDB","MIDI","MKV","MOV","MP3","MP4","MPEG","MPG","MPP","MPT","MPW","MPX","MSG","ODS","OGA","OGG","OGV","ONE","OST","PDF","PHP","PNG","POT","POTH","POTM","POTX","PPS","PPSX","PPT","PPTH","PPTM","PPTX","PREM","PS","PSD","PST","PUB","PUBH","PUBM","PWZ","RAR","READ","RP","RTF","SQL","SVG","SWF","TIF","TIFF","TXT","URL","VCF","VDX","VOB","VSD","VSS","VST","VSX","VTX","WAV","WDP","WEBM","WMA","WMV","XD","XLS","XLSM","XLSX","XML","ZIP"];function Pe(e){var t=e.split(".").pop().toUpperCase();return Fe.find((function(e){return e===t}))?"/img/file-extensions/"+t+".png":"/img/file-extensions/FILE.png"}var Ie=function(e){var t=xe();if(e.isLoading)return r.a.createElement(Z.a,null);var a=new Intl.DateTimeFormat("default",{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",hour12:!1});return r.a.createElement(ke.a,{container:!0,spacing:3},e.items.map((function(n){return r.a.createElement(ke.a,{item:!0,xs:6,sm:4,key:n._id},r.a.createElement(M.a,null,r.a.createElement(Le.a,{title:n.originalname,arrow:!0},r.a.createElement(Oe.a,null,r.a.createElement(_.a,{className:t.cardContent},r.a.createElement(we.a,{component:"img",alt:"File",title:"File",height:"55",image:Pe(n.originalname),className:t.cardMedia}),r.a.createElement(f.a,{className:t.typography,gutterBottom:!0,variant:"subtitle1"},n.originalname),r.a.createElement(f.a,{variant:"body2",color:"textSecondary",component:"p"},a.format(new Date(Date.parse(n.updatedAt))))))),r.a.createElement(je.a,null),r.a.createElement(B.a,{disableSpacing:!0},n.encrypted?r.a.createElement(G.a,{size:"small",className:t.lockIcon,onClick:e.openDownloadDialog(n.originalname,n._id)},r.a.createElement(Se.a,null)):r.a.createElement(G.a,{component:"a",size:"small",href:re+n.path},r.a.createElement(Ce.a,null)),r.a.createElement(f.a,{variant:"body2",color:"textSecondary",component:"p"},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(0===e)return"0 Bytes";var a=1024,n=t<0?0:t,r=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],o=Math.floor(Math.log(e)/Math.log(a));return parseFloat((e/Math.pow(a,o)).toFixed(n))+" "+r[o]}(n.size)),r.a.createElement(G.a,{size:"small",className:t.deleteIcon,onClick:e.openDeleteDialog(n.originalname,n._id)},r.a.createElement(he.a,null)))),r.a.createElement(f.a,{variant:"caption",className:t.destructText},n.destroyAt?"Delete in "+function(e){var t=(Date.parse(e)-Date.now())/6e4,a=t/60,n=Math.round(t%60);return a<=1?n+"min":a>=11.5||0===n?Math.round(a)+" hours":Math.floor(a)+"h "+n+"min"}(n.destroyAt):""))})))},Me=a(233),Be=a(234),_e=a(241),Ae=a(89),Ve=a.n(Ae),We=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).handleChange=function(e){var t=e.target;console.log(t);var a=n.state.formValues;"encryptChecked"===t.name?a[t.name]=t.checked:"files"===t.name?a[t.name]=t.files:a[t.name]=t.value,console.log(a[t.name]),n.setState({formValues:a}),n.handleValidation(t)},n.handleValidation=function(e){var t=e.name,a=e.value,r=n.state,o=r.formErrors,l=r.formValidity,i=r.formValues;"files"===t?(l[t]=0!==i[t],o[t]=l[t]?"":"Choose at least one file"):"password"!==t&&"encryptChecked"!==t||(l.password=a.length>=4||!i.encryptChecked,o.password=l.password?"":"Password should be at least 4 characters")},n.handleClose=function(){n.setState({formValues:{files:[],encryptChecked:!1,password:"",selfDestruct:"8"},formErrors:{files:"",password:""},formValidity:{files:!1,password:!0}}),n.props.handleClose()},n.handleSubmit=function(e){e.preventDefault();var t=n.state,a=t.formValues,r=t.formValidity;Object.values(r).every(Boolean)&&(n.props.postFiles(a),n.props.handleClose())},n.state={formValues:{files:[],encryptChecked:!1,password:"",selfDestruct:"8"},formErrors:{files:"",password:""},formValidity:{files:!1,password:!0}},n}return Object(c.a)(a,[{key:"render",value:function(){var e=this.props.classes,t=this.state,a=t.formValues,n=t.formErrors,o=t.formValidity;t.isSubmitting;return r.a.createElement(fe.a,{open:this.props.open,onClose:this.handleClose},r.a.createElement(ge.a,{id:"upload-dialog-title"},"Upload Files",r.a.createElement(G.a,{className:e.closeButton,onClick:this.handleClose},r.a.createElement(Ve.a,null))),r.a.createElement("form",{onSubmit:this.props.handleSubmit},r.a.createElement(Me.a,{className:e.TopDialogContent},r.a.createElement("input",{id:"upload-files-button",name:"files",multiple:!0,type:"file",onChange:this.handleChange,hidden:!0,className:e.input}),r.a.createElement("label",{htmlFor:"upload-files-button"},r.a.createElement(I.a,{fullWidth:!0,variant:"outlined",color:"primary",size:"large",component:"span",className:e.uploadFilesButton},1===a.files.length?a.files[0].name:a.files.length>1?a.files.length+" Files Selected":"Select Files"))),r.a.createElement(je.a,null),r.a.createElement(Me.a,null,r.a.createElement(Be.a,{label:"Encrypt",control:r.a.createElement(_e.a,{name:"encryptChecked",checked:a.encryptChecked,onChange:this.handleChange,color:"primary"})}),r.a.createElement(A.a,{margin:"dense",fullWidth:!0,variant:"filled",disabled:!a.encryptChecked,value:a.password,onChange:this.handleChange,error:!o.password,name:"password",id:"password",label:"Password",type:"password",helperText:o.password?"If you lose the password, you won't be able to accsess the file":n.password}),r.a.createElement(se.a,{margin:"dense",variant:"filled",fullWidth:!0,className:e.selfDestruct},r.a.createElement(me.a,{id:"destruct-label-2"},"Self Destruct"),r.a.createElement(ue.a,{labelId:"destruct-label-2",id:"selfDestruct",name:"selfDestruct",value:a.selfDestruct,onChange:this.handleChange,label:"Self Destruct"},r.a.createElement(pe.a,{value:"-1"},"Never"),r.a.createElement(pe.a,{value:"1"},"1 Hour"),r.a.createElement(pe.a,{value:"8"},"8 Hours"),r.a.createElement(pe.a,{value:"24"},"24 Hours"),r.a.createElement(pe.a,{value:"72"},"3 Days")))),r.a.createElement(Ee.a,null,r.a.createElement(I.a,{type:"submit",onClick:this.handleSubmit,color:"primary"},"Upload"))))}}]),a}(n.Component),He=Object(p.a)((function(e){return{input:{},selfDestruct:{marginTop:e.spacing(2)},TopDialogContent:{"&&:first-child":{paddingTop:e.spacing(1),paddingBottom:e.spacing(2)}},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}}))(We),Ge=a(235);var Re=function(e){return r.a.createElement(fe.a,{open:e.open,onClose:e.handleClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(ge.a,{id:"dialog-title"},"Delete this file?"),r.a.createElement(Me.a,null,r.a.createElement(Ge.a,{id:"dialog-description"},'Are you sure you want to delete the file "',e.filename,'"?')),r.a.createElement(Ee.a,null,r.a.createElement(I.a,{onClick:e.handleClose,color:"primary"},"Cancel"),r.a.createElement(I.a,{onClick:function(){e.handleDelete(e.fileId),e.handleClose()},color:"primary",autoFocus:!0},"Delete")))};var Xe=function(e){return r.a.createElement(fe.a,{open:e.open,onClose:e.handleClose},r.a.createElement(ge.a,{id:"download-dialog-title"},"Download Encrypted File"),r.a.createElement("form",{method:"post",action:re+"api/files/decrypt/"+e.filename},r.a.createElement(Me.a,null,r.a.createElement("input",{hidden:!0,type:"text",name:"id",value:e.fileId}),r.a.createElement(A.a,{autoFocus:!0,margin:"dense",id:"password",name:"password",label:"Password",type:"password",fullWidth:!0}),r.a.createElement(Ge.a,null,"If you enter the wrong password, the downloaded file will be corrupted.")),r.a.createElement(Ee.a,null,r.a.createElement(I.a,{onClick:e.handleClose,color:"primary"},"Cancel"),r.a.createElement(I.a,{type:"submit",onClick:e.handleClose,color:"primary"},"Download"))))},Ue=a(117),ze=function(e){return{type:"LOADING_STATE_FILES",payload:e}},Je=function(e){return{type:"ERROR_FILES",payload:e}},Ke=function(e){return{type:"LOAD_FILES",payload:e}},Ye=a(118),Ze=a.n(Ye),Qe=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).closeDialog=function(e){return function(){n.setState((function(t){return Object(De.a)({},e,Object(m.a)({},t[e],{open:!1}))}))}},n.openUploadDialog=function(){n.setState((function(e){return{uploadDialog:Object(m.a)({},e.uploadDialog,{open:!0})}}))},n.openDeleteDialog=function(e,t){return function(){n.setState((function(a){return{deleteDialog:Object(m.a)({},a.deleteDialog,{open:!0,fileId:t,filename:e})}}))}},n.openDownloadDialog=function(e,t){return function(){n.setState((function(a){return{downloadDialog:Object(m.a)({},a.downloadDialog,{open:!0,fileId:t,filename:e})}}))}},n.state={downloadDialog:{open:!1,handleClose:n.closeDialog("downloadDialog"),fileId:"",filename:""},deleteDialog:{open:!1,handleClose:n.closeDialog("deleteDialog"),handleDelete:n.props.deleteFile,fileId:"",filename:""},uploadDialog:{open:null,handleClose:n.closeDialog("uploadDialog"),postFiles:n.props.postFiles}},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.props.fetchFiles(),this.props.upload&&this.openUploadDialog()}},{key:"render",value:function(){var e=this.props.classes;return null!==this.props.files.error?r.a.createElement("div",{className:e.root},r.a.createElement(f.a,{variant:"h4",gutterBottom:!0,className:e.typographyTitle},"Files"),r.a.createElement(g,{error:this.props.files.error})):r.a.createElement(P.a,{className:e.root,maxWidth:"sm"},r.a.createElement(f.a,{variant:"h4",gutterBottom:!0,className:e.typographyTitle},"Files"),r.a.createElement(I.a,{variant:"contained",size:"large",color:"primary",onClick:this.openUploadDialog,startIcon:r.a.createElement(Ze.a,null),className:e.uploadFilesButton},"Upload Files"),r.a.createElement(Ie,{isLoading:this.props.files.isLoading,items:this.props.files.items,openDeleteDialog:this.openDeleteDialog,openDownloadDialog:this.openDownloadDialog}),r.a.createElement(Xe,this.state.downloadDialog),r.a.createElement(Re,this.state.deleteDialog),r.a.createElement(He,this.state.uploadDialog))}}]),a}(n.Component),$e=Object(ne.b)((function(e){return{files:e.files}}),(function(e){return{fetchFiles:function(){return e((function(e){return e(ze(!0)),fetch(re+"api/files/",{method:"GET",credentials:"same-origin"}).then((function(e){if(e.ok)return e;var t=new Error("Error "+e.status+": "+e.statusText);throw t.response=e,t}),(function(e){throw e})).then((function(e){return e.json()})).then((function(t){return e(Ke(t))})).catch((function(t){t.type="connection",e(Je(t))}))}))},postFiles:function(t){return e((a=t,function(e){e(ze(!0));var t,n=new FormData,r=Object(Ue.a)(a.files);try{for(r.s();!(t=r.n()).done;){var o=t.value;n.append("files",o)}}catch(l){r.e(l)}finally{r.f()}n.append("encrypt",a.encryptChecked),n.append("password",a.password),n.append("selfDestruct",a.selfDestruct),fetch(re+"api/files/upload",{method:"POST",headers:{Accept:"application/json"},body:n}).then((function(e){if(e.ok)return e;var t=new Error("Error "+e.status+": "+e.statusText);throw t.response=e,t}),(function(e){throw e})).then((function(e){return e.json()})).then((function(t){return e(function(e){return{type:"ADD_FILE",payload:e}}(t))})).catch((function(t){t.type="connection",t.message="Your file could not be posted\nError: "+t.message,e(Je(t))}))}));var a},deleteFile:function(t){return e(function(e){return function(t){return t(ze(!0)),fetch(re+"api/files/download/"+e,{method:"DELETE",credentials:"same-origin"}).then((function(e){if(e.ok)return e;var t=new Error("Error "+e.status+": "+e.statusText);throw t.response=e,t}),(function(e){throw e})).then((function(e){return e.json()})).then((function(e){return t(function(e){return{type:"DELETE_FILE",payload:e}}(e._id))})).catch((function(e){e.type="connection",e.message="Unable to delete file\nError: "+e.message,t(Je(e))}))}}(t))}}}))(Object(p.a)((function(e){return{typographyTitle:{textAlign:"left",padding:e.spacing(2,2,0)},root:{paddingBottom:56+e.spacing(2)},uploadFilesButton:{marginBottom:e.spacing(2)}}}))(Qe)),qe=a(93),et=a(3),tt=a(14),at=a(246),nt=a(120),rt=a.n(nt),ot=a(121),lt=a.n(ot),it=a(236),ct=a(122),st=a.n(ct),ut=a(119),mt=a.n(ut),pt=Object(d.a)((function(e){return{root:{display:"flex"},drawer:{width:240,flexShrink:0,whiteSpace:"nowrap"},drawerOpen:{width:240,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerClose:{transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),overflowX:"hidden",width:e.spacing(7)},toggleButton:{position:"absolute",top:0,right:0}}}));function dt(e){var t,a,n=pt(e),o=(Object(tt.a)(),r.a.useState(!1)),l=Object(qe.a)(o,2),i=(l[0],l[1],r.a.useState(!0)),c=Object(qe.a)(i,2),s=c[0],u=c[1],m=function(){u(!s)};return r.a.createElement("div",{className:n.root},r.a.createElement(at.a,{onClose:m,variant:"permanent",className:Object(et.a)("".concat(n.drawer),(t={},Object(De.a)(t,"".concat(n.drawerOpen),s),Object(De.a)(t,n.drawerClose,!s),t)),classes:{paper:Object(et.a)((a={},Object(De.a)(a,"".concat(n.drawerOpen),s),Object(De.a)(a,n.drawerClose,!s),a))}},r.a.createElement("img",{src:mt.a,alt:"Logo",width:"100%"}),r.a.createElement(G.a,{onClick:m,className:n.toggleButton},s?r.a.createElement(rt.a,null):r.a.createElement(lt.a,null)),r.a.createElement(je.a,null),r.a.createElement(z.a,null,r.a.createElement(J.a,{button:!0,key:"add",component:S.b,to:"/newNote"},r.a.createElement(it.a,null,r.a.createElement(q.a,null)),r.a.createElement(Y.a,{primary:"Add Note"})),r.a.createElement(J.a,{button:!0,key:"home",component:S.b,to:"/"},r.a.createElement(it.a,null,r.a.createElement(w.a,null)),r.a.createElement(Y.a,{primary:"Home"})),r.a.createElement(J.a,{button:!0,key:"notes",component:S.b,to:"/notes"},r.a.createElement(it.a,null,r.a.createElement(T.a,null)),r.a.createElement(Y.a,{primary:"Notes"})),r.a.createElement(J.a,{button:!0,key:"files",component:S.b,to:"/files"},r.a.createElement(it.a,null,r.a.createElement(N.a,null)),r.a.createElement(Y.a,{primary:"Files"}),r.a.createElement(G.a,{component:S.b,to:"/files/upload"},r.a.createElement(q.a,null)))),r.a.createElement(je.a,null),r.a.createElement(z.a,null,r.a.createElement(J.a,{button:!0,key:"setting"},r.a.createElement(it.a,null,r.a.createElement(st.a,null)),r.a.createElement(Y.a,{primary:"Setting"})))))}var ht=a(238),ft=a(243),Et=a(125),gt=a(237),yt=Object(Et.a)({palette:{type:"dark",primary:{main:"#00838F"},secondary:{main:"#445963"}}}),bt=Object(Et.a)({palette:{type:"light",primary:{main:"#00838F"},secondary:{main:"#445963"}}}),vt=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).handleThemeToggle=function(){"light"===n.props.ui.theme?n.props.setThemeDark():n.props.setThemeLight()},n.HomeWithProps=function(){return r.a.createElement(U,{handleThemeToggle:n.handleThemeToggle,notes:n.props.notes,postNote:n.props.postNote})},n.NotesPage=function(e){return"xs"===n.props.width?"notes"===e.path?r.a.createElement(ae,{notes:n.props.notes}):r.a.createElement(ve,null):r.a.createElement(ke.a,{container:!0},r.a.createElement(ke.a,{item:!0,xs:4},r.a.createElement(ae,{notes:n.props.notes})),r.a.createElement(je.a,{orientation:"vertical",flexItem:!0}),r.a.createElement(ke.a,{item:!0,xs:7},"notes"===e.path?null:r.a.createElement(ve,null)))},n.state={drawerOpen:"xs"!==n.props.width},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){console.log("fetchNotes() in componentDidMount of Main"),this.props.fetchNotes(),window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches&&this.props.setThemeDark()}},{key:"render",value:function(){var e="dark"===this.props.ui.theme?yt:bt,t=this.props.classes;return r.a.createElement(gt.a,{theme:e},r.a.createElement(S.a,null,r.a.createElement(ht.a,null),r.a.createElement("div",{className:t.root},"xs"===this.props.width?r.a.createElement(F,null):r.a.createElement(dt,null),r.a.createElement("div",{className:t.content},r.a.createElement(y,null,r.a.createElement(k.c,null,r.a.createElement(k.a,{path:"/home"},r.a.createElement(this.HomeWithProps,null)),r.a.createElement(k.a,{path:"/notes/:noteId"},r.a.createElement(this.NotesPage,{path:"editNote"})),r.a.createElement(k.a,{exact:!0,path:"/notes"},r.a.createElement(this.NotesPage,{path:"notes"})),r.a.createElement(k.a,{path:"/newNote"},r.a.createElement(this.NotesPage,{path:"newNote"})),r.a.createElement(k.a,{path:"/files/upload"},r.a.createElement($e,{upload:!0})),r.a.createElement(k.a,{path:"/files"},r.a.createElement($e,null)),r.a.createElement(k.a,{path:"/"},r.a.createElement(this.HomeWithProps,null))))))))}}]),a}(n.Component),Dt=Object(ne.b)((function(e){return Object(m.a)({},e)}),(function(e){return{fetchNotes:function(){return e((function(e){return e(oe(!0)),fetch(t?re+"api/notes/"+t:re+"api/notes/",{method:"GET",credentials:"same-origin"}).then((function(e){if(e.ok)return e;var t=new Error("Error "+e.status+": "+e.statusText);throw t.response=e,t}),(function(e){throw e})).then((function(e){return e.json()})).then((function(t){return e(ie(t))})).catch((function(t){t.type="connection",e(le(t))}))}));var t},postNote:function(t){return e(ce(t))},setThemeDark:function(){return e({type:"SET_THEME_DARK"})},setThemeLight:function(){return e({type:"SET_THEME_LIGHT"})}}}))(Object(ft.a)()(Object(p.a)((function(e){return{root:{display:"flex"},content:{flexGrow:1}}}))(vt))),wt=(a(156),a(53));var Ot=Object(wt.c)({notes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{items:[],isLoading:!0,error:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ERROR_NOTES":return Object(m.a)({},e,{error:t.payload,isLoading:!1});case"ADD_NOTE":return Object(m.a)({},e,{items:e.items.concat(t.payload),isLoading:!1});case"EDIT_NOTE":return Object(m.a)({},e,{items:e.items.map((function(e){return e._id===t.payload._id?t.payload:e})),isLoading:!1});case"DELETE_NOTE":return Object(m.a)({},e,{items:e.items.filter((function(e){return e._id!==t.payload})),isLoading:!1});case"LOADING_STATE_NOTES":return Object(m.a)({},e,{isLoading:t.payload});case"LOAD_NOTES":return Object(m.a)({},e,{items:t.payload,isLoading:!1});default:return e}},files:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{items:[],isLoading:!0,error:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ERROR_FILES":return Object(m.a)({},e,{error:t.payload,isLoading:!1});case"ADD_FILE":return Object(m.a)({},e,{items:e.items.concat(t.payload),isLoading:!1});case"DELETE_FILE":return Object(m.a)({},e,{items:e.items.filter((function(e){return e._id!==t.payload})),isLoading:!1});case"LOADING_STATE_FILES":return Object(m.a)({},e,{isLoading:t.payload});case"LOAD_FILES":return Object(m.a)({},e,{items:t.payload,isLoading:!1});default:return e}},ui:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{theme:"light"},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_THEME_DARK":return Object(m.a)({},e,{theme:"dark"});case"SET_THEME_LIGHT":return Object(m.a)({},e,{theme:"light"});default:return e}}}),Tt=a(123),Ct=a(124),Nt=a.n(Ct),St=Object(wt.d)(Ot,Object(wt.a)(Tt.a,Nt.a));var kt=function(){return r.a.createElement(ne.a,{store:St},r.a.createElement("div",{className:"App"},r.a.createElement(Dt,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(kt,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[143,1,2]]]);
//# sourceMappingURL=main.900d6a1c.chunk.js.map